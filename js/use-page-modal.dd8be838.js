import{a as e,L as a,M as l,N as t,b as d,A as o,B as s,c as u,d as i,O as n}from"./element-plus.d5014fd1.js";import{J as r,o as p,c as m,a as f,K as c,X as h,R as y,F as v,a6 as g,Q as V,ab as b,O as k,M as C,U as w,d as I,e as _,ag as j,W as U,V as N}from"./@vue.962d419f.js";import{_ as O}from"./index.2ced2d9b.js";import{s as x}from"./page-content.9f372526.js";const D=r({props:{formItems:{type:Array,default:()=>[]},labelWidth:{type:String,default:"90px"},itemStyle:{type:Object,default:()=>({padding:"10px 70px 10px 40px"})},colLayout:{type:Object,default:()=>({xl:6,lg:8,md:12,sm:24,xs:24})},modelValue:{type:Object,required:!0}},emits:["update:modelValue"],setup:(e,{emit:a})=>({handleValueChange:(l,t)=>{a("update:modelValue",{...e.modelValue,[t]:l})}})}),$={class:"user-form"},S={class:"header"},q={class:"footer"};const A=O(D,[["render",function(i,n,r,I,_,j){const U=e,N=a,O=l,x=t,D=d,A=o,L=s,M=u;return p(),m("div",$,[f("div",S,[c(i.$slots,"header",{},void 0,!0)]),h(M,{"label-width":i.labelWidth},{default:y((()=>[h(L,null,{default:y((()=>[(p(!0),m(v,null,g(i.formItems,(e=>(p(),V(A,b(k({key:e.label},i.colLayout)),{default:y((()=>[e.isHidden?w("",!0):(p(),V(D,{key:0,label:e.label,style:C(i.itemStyle)},{default:y((()=>["input"===e.type||"password"===e.type?(p(),V(U,{key:0,placeholder:e.placeholder,"show-password":"password"===e.type,"model-value":i.modelValue[`${e.field}`],"onUpdate:modelValue":a=>i.handleValueChange(a,e.field)},null,8,["placeholder","show-password","model-value","onUpdate:modelValue"])):"select"===e.type?(p(),V(O,{key:1,placeholder:e.placeholder,style:{width:"100%"},"model-value":i.modelValue[`${e.field}`],"onUpdate:modelValue":a=>i.handleValueChange(a,e.field)},{default:y((()=>[(p(!0),m(v,null,g(e.options,(e=>(p(),V(N,{key:e.value,value:e.value,label:e.title},null,8,["value","label"])))),128))])),_:2},1032,["placeholder","model-value","onUpdate:modelValue"])):"datapicker"===e.type?(p(),V(x,k({key:2,style:{width:"100%"}},e.otherOptions,{"model-value":i.modelValue[`${e.field}`],"onUpdate:modelValue":a=>i.handleValueChange(a,e.field),"unlink-panels":!0}),null,16,["model-value","onUpdate:modelValue"])):w("",!0)])),_:2},1032,["label","style"]))])),_:2},1040)))),128))])),_:1})])),_:1},8,["label-width"]),f("div",q,[c(i.$slots,"footer",{},void 0,!0)])])}],["__scopeId","data-v-1d74bd9e"]]),L=r({components:{UserForm:A},props:{modalConfig:{type:Object,required:!0},defaultInfo:{type:Object,default:()=>({})},pageName:{type:String,required:!0},titleName:{type:String,required:!0},otherInfo:{type:Object,default:()=>({})}},setup(e){const a=I(!1),l=I({});_((()=>e.defaultInfo),(a=>{for(const t of e.modalConfig.formItems)l.value[`${t.field}`]=a[`${t.field}`]}));const t=x();return{dialogVisible:a,formData:l,handleConfirmClick:()=>{a.value=!1,Object.keys(e.defaultInfo).length?t.editPageDataAction({pageName:e.pageName,editData:{...l.value,...e.otherInfo},id:e.defaultInfo.id}):t.createPageDataAction({pageName:e.pageName,newData:{...l.value,...e.otherInfo}})}}}}),M={class:"page-modal"},P={class:"title"},W={class:"dialog-footer"};const F=O(L,[["render",function(e,a,l,t,d,o){const s=j("user-form"),u=i,r=n;return p(),m("div",M,[h(r,{modelValue:e.dialogVisible,"onUpdate:modelValue":a[2]||(a[2]=a=>e.dialogVisible=a),width:"25%",center:"","destroy-on-close":""},{header:y((()=>[f("div",P,U(e.titleName),1)])),footer:y((()=>[f("span",W,[h(u,{type:"primary",onClick:e.handleConfirmClick},{default:y((()=>[N("确 认")])),_:1},8,["onClick"]),h(u,{onClick:a[1]||(a[1]=a=>e.dialogVisible=!1)},{default:y((()=>[N("取 消")])),_:1})])])),default:y((()=>[h(s,k({modelValue:e.formData,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData=a)},e.modalConfig),null,16,["modelValue"]),c(e.$slots,"default",{},void 0,!0)])),_:3},8,["modelValue"])])}],["__scopeId","data-v-f8057625"]]);function R(e,a){const l=I(),t=I({}),d=I(!1);return{pageModalRef:l,defaultInfo:t,handleNewData:()=>{t.value={},d.value=!0,l.value&&(l.value.dialogVisible=!0),e&&e()},handleEditData:e=>{t.value={...e},d.value=!1,l.value&&(l.value.dialogVisible=!0),a&&a(e)},isTitleName:d}}export{F as P,A as U,R as u};
